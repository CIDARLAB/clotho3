<div ng-controller="PlasmidCtrl" class="container">
    <div class="row">
    <div class="span8">
        <h3>
            Sequence
        </h3>
        <div class="ldt">
            <pre plasmid-editor ng-model='sequence' features="features" editable="{{editable}}" style="position:relative;"></pre>
        </div>

    </div>
    <div class="span4">
        <h3>Features
        </h3>
        <form novalidate class="well" ng-init="new = emptyFeat()">
            <div class="row-fluid">
                <input type="text" class="span12" placeholder="Feature Name" ng-model="new.label">

                <input type="text" class="span6" placeholder="Sequence" ng-model="new.match" ng-pattern="reg_match" ng-trim="false" ng-disabled="new.pos.length"/>

                <input type="text" class="span6" placeholder="Position" ng-model="new.pos" ng-pattern="reg_pos" ng-trim="false" ng-disabled="new.match.length"/>
                <div class="input-append span6" style="margin-left: 0px;">
                    <input type="text" class="span9" placeholder="Text" ng-model="new.css.color" ng-pattern="reg_color" ng-trim="false" ng-disabled="new.css.background"/>
                    <span class="add-on" ng-click="new.css.color = randomColor()"><i class="icon-question-sign"></i></span>
                </div>
                <div class="input-append span6" >
                    <input type="text" class="span9" placeholder="Background" ng-pattern="reg_color" ng-model="new.css.background" ng-trim="false" ng-disabled="new.css.color"/>
                    <span class="add-on" ng-click="new.css.background = randomColor()"><i class="icon-question-sign"></i></span>
                </div>

                <button class="btn span5 pull-right" ng-click="addFeature(new);" ng-disabled="!featureValid(new)">Add Feature</button>
            </div>
        </form>
        <div class="row-fluid">
            <div class="btn-group">
                <button class="btn" ng-click="toggleActive(features, true)">Active</button>
                <button class="btn" ng-click="toggleActive(features)">Toggle All</button>
                <button class="btn" ng-click="toggleActive(features, false)">Inactive</button>
            </div>
            <div ng-repeat="feat in features">
                <button class="btn" ng-click="toggleActive(feat)" ng-class="{'disabled btn-danger' : !feat.active}"><i ng-class="{'icon-ok' : feat.active, 'icon-remove' : !feat.active}"></i></button>
                <span ng-style="{{feat.css}}">{{ feat.label }} <span ng-if="feat.pos">@ {{ feat.pos.start }} - {{ feat.pos.end }}</span><span ng-if="feat.match"> ({{ feat.match |limitTo:10 }})</span></span>
            </div>
        </div>
    </div>
    </div>
</div>