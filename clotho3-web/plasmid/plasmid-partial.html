<style type="text/css">
    .ldt, .ldt pre, .ldt textarea {
        font-size: 16px !important;
        /* resize algorithm depends on a monospaced font */
        font-family: monospace !important;
        color: black;
    }

    .ldt textarea {
        /* fallback for browsers without rgba */
        color: transparent !important;
        /* make sure the alpha is low enough so it doesn't block the output layer */
        color: rgba(0,0,0,0.2) !important;
    }

    .ldt {
        overflow: auto;
        position: relative;
    }

    .ldt pre {
        -moz-padding-start: 1px;
        min-height: 22px;
    }

    /*.ldt label {
        position: absolute;
        pointer-events: auto;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: inline;
        -moz-box-sizing: border-box;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        cursor: text;
        overflow: hidden;
    }*/

    .ldt textarea {
        position: absolute;
        pointer-events: auto;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 10.5px; /*pre plus border*/
        border: 0;
        background: 0;
        outline: none;
        resize: none;
        min-width: 100%;
        min-height: 100%;
        overflow: hidden;
        -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
        -moz-box-sizing: border-box;    /* Firefox, other Gecko */
        box-sizing: border-box;         /* Opera/IE 8+ */
        /* IE doesn't support rgba texarea, so use vendor specific alpha filter */
        filter: alpha(opacity = 0);
    }

</style>

<div ng-controller="PlasmidCtrl" class="container">
    <div class="row">
    <div class="span8">
        <h3>
            Sequence
            <div class="btn-group pull-right">
                <button class="btn btn-small" ng-click="highlight()">Highlight</button>
                <button class="btn btn-small" ng-click="addFeatureSelection()" ng-disabled="!textSelected">Annotate Selection</button>
            </div>
        </h3>
        <div class="ldt">
            <pre plasmid-editor ng-model='sequence' features="featureList" editable="{{editable}}" style="position:relative;"></pre>
        </div>

    </div>
    <div class="span4">
        <h3>Features
        </h3>
        <form novalidate class="well" ng-init="new = emptyFeat()">
            <div class="row-fluid">
                <input type="text" class="span12" placeholder="Feature Name" ng-model="new.label">
                <div class="input-prepend input-append span12">
                    <input type="text" class="span5" placeholder="Sequence" ng-model="new.match" ng-pattern="reg_match" ng-trim="false" ng-disabled="new.pos.length"/>
                    <span class="add-on">OR</span>
                    <input type="text" class="span5" placeholder="Position" ng-model="new.pos" ng-pattern="reg_pos" ng-trim="false" ng-disabled="new.match.length"/>
                </div>
                <div class="input-prepend input-append span6">
                    <input type="color" class="span3" placeholder="Text" ng-model="new.css.color" ng-pattern="reg_color" ng-trim="false" />
                    <span class="add-on">OR</span>
                    <input type="color" class="span3" placeholder="Background" ng-pattern="reg_color" ng-model="new.css.background" ng-trim="false" />
                </div>
                <button class="btn span5" ng-click="addFeature(new);" ng-disabled="!featureValid(new)">Add Feature</button>
            </div>
        </form>
        <div class="row-fluid">
            <div ng-repeat="feat in featureList">
                <button btn-checkbox class="btn" ng-model="feat.active">Active</button>
                <span ng-style="{{feat.css}}">{{feat.match}} --- {{feat.pos.start}} ... {{feat.pos.end}} ---- {{ feat.label }}</span>
            </div>
        </div>
    </div>
    </div>
</div>