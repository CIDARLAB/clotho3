<div class="form-group">
  <div class="input-group">
    <clotho-token class="clothoReferenceToken"
                  ng-repeat="token in tokenCollection.tokens track by $index"
                  token="token"
                  token-active-index="tokenCollection.activeTokenIndex"
                  token-active-pass="{{tokenCollection.activeTokenIndex == $index}}"
                  on-click="tokenCtrl.onTokenActive($index, $event, $token)"
                  on-remove="tokenCtrl.removeToken($index, $token)"></clotho-token>
    <input type="text"
           clotho-reference-autocomplete
           class="form-control"
           ng-model="query"
           ng-trim="false"
           ng-click="tokenCtrl.focusInput()"
           placeholder="{{currentPlaceholder || (hasFocus ? 'Type to Query' : (passedPlaceholder || 'Type to Query') ) }}"
           autocomplete-trigger="false"
           autocomplete-trigger-include="false"
           autocomplete-clear-on-select="true"
           autocomplete-clear-on-enter="true"
           autocomplete-filter="currentFilter"
           autocomplete-block-input="blockInput"
           autocomplete-has-focus="hasFocus"
           autocomplete-on-select="tokenCtrl.handleSelect($item, $query)"
           autocomplete-on-enter="tokenCtrl.handleEnter($event, $query)"
           autocomplete-on-backout="tokenCtrl.handleBackout($event)">
    <span class="input-group-btn">
      <button type="button"
              class="btn btn-default"
              ng-click="tokenCtrl.disambiguate($event)">
        <span class="glyphicon glyphicon-chevron-right"></span>
      </button>
    </span>
  </div>
</div>
